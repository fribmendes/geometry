{"version":1,"ops":[{"type":1,"author":{"id":"46c24e703aaa390dae044af2bdc819cd47d046e3"},"timestamp":1493382834,"metadata":{"github-id":"MDU6SXNzdWUyMjUwNjc0NjE=","github-url":"https://github.com/geometry-zsh/geometry/issues/151","origin":"github"},"title":"How to make a custom auto-ls function by enter key and geometry theme workable together?","message":"Auto-ls function, actually two functions that I found, they works fine for example with oh-my-zsh arrow theme.\nfunction one:\n```\nauto-ls () {\n   if [[ $#BUFFER -eq 0 ]]; then\n       echo \"\"\n       ls\n       zle redisplay\n   else\n       zle .$WIDGET\n   fi\n}\nzle -N auto-ls\nzle -N accept-line auto-ls\nzle -N other-widget auto-ls\n```\n\nfunction two:\n```\nfunction do_enter() {\n    if [ -n \"$BUFFER\" ]; then\n        zle accept-line\n        return 0\n    fi\n    echo\n    ls\n    if [ \"$(git rev-parse --is-inside-work-tree 2\u003e /dev/null)\" = 'true' ]; then\n        echo\n        echo -e \"\\e[0;33m--- git status ---\\e[0m\"\n        git status -sb\n    fi\n    zle reset-prompt\n    return 0\n}\nzle -N do_enter\nbindkey '^m' do_enter\n```\nI'm putting function after loading theme.\n\nBut with geometry theme I just can see for like 0.1 second the output of ls when hitting enter and then it disappear. I've just find out that it happens when ls output has one line.\nBut if there more than one line, in that case hitting enter gives ls output without last line.\nAnd I can't navigate without cd now. So when I entering directory name without cd than I getting 'command not found'.","files":null}]}